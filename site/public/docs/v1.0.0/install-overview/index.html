<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/styles.666a5dc1cd80e47092a71103358e46b56345de6f3044680f856f219cbc2fe91b.css" integrity="sha256-Zmpdwc2A5HCSpxEDNY5GtWNF3m8wRGgPhW8hnLwv6Rs=">

</head>



    
    <meta name="robots" content="noindex">




    <title>Velero Docs - </title>


<body id="docs">
<div class="container-fluid site-outer-container">
    <div class="site-container">
        <header class="site-header">
    <div class="site-header-content">
        <div class="logo">
            <a href="/" aria-label="Velero homepage"><img src="/img/Velero.svg" class="logo" alt="Homepage"/></a>
        </div>
        <ul class="nav-menu" id="header-nav">
            <li class="home"><a href="/" title="Velero">Home</a></li>
            <li class="docs"><a href="/docs/v1.4" title="Documentation">Documentation</a></li>
            <li class="plugins"><a href="/plugins" title="Plugins">Plugins</a></li>
            <li class="blog"><a href="/blog" title="Blog Posts">Blog</a></li>
            <li class="community"><a href="/community" title="Community">Community</a></li>
            <li class="resources"><a href="/resources" title="Resources">Resources</a></li>
        </ul>
        <div class="nav-mobile-link">
            <a href="javascript:void(0);" id="nav-mobile-toggle"></a>
        </div>
    </div>
</header>

        <div class="post-single-hero post-single-hero-short bg-color-med-blue">
            <div class="section">
                <div class="section-content">
                    <h1>Documentation</h1>
                </div>
            </div>
        </div>
        <div class="section section-card pt-4 pb-0">
            <div class="container container-max">
                <div class="row">
                    <div class="col-md-3 toc">
                        <div class="row">
    <div class="dropdown mb-2">
        
            <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                v1.0.0
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                
                
                

                
                    
                    <a class="dropdown-item"
                       href="/docs/master/install-overview/">master</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.4/install-overview/">v1.4</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.2/install-overview/">v1.3.2</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.1/install-overview/">v1.3.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.0/install-overview/">v1.3.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.2.0/install-overview/">v1.2.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.1.0/install-overview/">v1.1.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.0.0/install-overview/">v1.0.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.11.0/install-overview/">v0.11.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.10.0/install-overview/">v0.10.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.9.0/install-overview/">v0.9.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.8.1/install-overview/">v0.8.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.8.0/install-overview/">v0.8.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.7.1/install-overview/">v0.7.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.7.0/install-overview/">v0.7.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.6.0/install-overview/">v0.6.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.5.0/install-overview/">v0.5.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.4.0/install-overview/">v0.4.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.3.0/install-overview/">v0.3.0</a>
                
            </div>
        
    </div>
</div>
                        <br/>
                        <form class="d-flex align-items-center">
                          <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
                            <input type="search" class="form-control docsearch-input" id="search-input" placeholder="Search..."
                                   aria-label="Search for..." autocomplete="off" spellcheck="false" role="combobox"
                                   aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0"
                                   dir="auto" style="position: relative; vertical-align: top;">
                          </span>
                        </form>
                        <nav class="navigation">
    
    
    
        
        
        
        

        
            <h3>Introduction</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/index.html">About Velero</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/about">How Velero works</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/locations">About locations</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/support-matrix">Supported platforms</a>
                        
                    </li>
                
            </ul>
        
            <h3>Install</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/install-overview">Overview</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/upgrade-to-1.0">Upgrade to 1.0</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/get-started">Quick Start with In-Cluster Minio</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/aws-config">Run on AWS</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/azure-config">Run on Azure</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/gcp-config">Run on GCP</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/restic">Restic Setup</a>
                        
                    </li>
                
            </ul>
        
            <h3>Use</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/disaster-case">Disaster Recovery</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/migration-case">Cluster migration</a>
                        
                    </li>
                
            </ul>
        
            <h3>Troubleshoot</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/troubleshooting">Troubleshooting</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/debugging-install">Troubleshoot an install or setup</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/debugging-restores">Troubleshoot a restore</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/restic#troubleshooting">Troubleshoot Restic</a>
                        
                    </li>
                
            </ul>
        
            <h3>Customize Velero</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/build-from-source">Build from source</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/namespace">Run in any namespace</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/extend">Extend</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/plugins">Extend with plugins</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/hooks">Extend with hooks</a>
                        
                    </li>
                
            </ul>
        
            <h3>More information</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/output-file-format">Backup file format</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/api-types">API types</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v1.0.0/faq">FAQ</a>
                        
                    </li>
                
            </ul>
        
    
</nav>

                    </div>
                    <div class="col-md-8">
                        
    
    <div class="alert alert-primary" role="alert">
        
            <p>
                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                Documentation for version v1.0.0 is no longer actively maintained.
                The version you are currently viewing is a static snapshot.
                For up-to-date documentation, see the <a href="/docs/v1.4/install-overview/">latest version</a>.
            </p>
        
    </div>

                        <div class="documentation-container">
                            <h1 id="set-up-velero-on-your-platform">Set up Velero on your platform</h1>
<p>You can run Velero with a cloud provider or on-premises. For detailed information about the platforms that Velero supports, see 

    

<a href="/docs/v1.0.0/support-matrix/">Compatible Storage Providers</a>.</p>
<p>You can run Velero in any namespace, which requires additional customization. See 

    

<a href="/docs/v1.0.0/namespace/">Run in custom namespace</a>.</p>
<p>You can also use Velero&rsquo;s integration with restic, which requires additional setup. See 

    

<a href="/docs/v1.0.0/restic/">restic instructions</a>.</p>
<h2 id="cloud-provider">Cloud provider</h2>
<p>The Velero client includes an <code>install</code> command to specify the settings for each supported cloud provider. You can install Velero for the included cloud providers using the following command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">velero install <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --provider &lt;YOUR_PROVIDER&gt; <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --bucket &lt;YOUR_BUCKET&gt; <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --secret-file &lt;PATH_TO_FILE&gt; <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">[</span>--backup-location-config<span style="color:#f92672">]</span>
    <span style="color:#f92672">[</span>--snapshot-location-config<span style="color:#f92672">]</span>
    <span style="color:#f92672">[</span>--namespace<span style="color:#f92672">]</span>
    <span style="color:#f92672">[</span>--use-volume-snapshots<span style="color:#f92672">]</span>
    <span style="color:#f92672">[</span>--use-restic<span style="color:#f92672">]</span>
</code></pre></div><p>For provider-specific instructions, see:</p>
<ul>
<li>

    

<a href="/docs/v1.0.0/aws-config/">Run Velero on AWS</a></li>
<li>

    

<a href="/docs/v1.0.0/gcp-config/">Run Velero on GCP</a></li>
<li>

    

<a href="/docs/v1.0.0/azure-config/">Run Velero on Azure</a></li>
<li>

    

<a href="/docs/v1.0.0/ibm-config/">Use IBM Cloud Object Store as Velero&rsquo;s storage destination</a></li>
</ul>
<p>When using restic on a storage provider that doesn&rsquo;t currently have Velero support for snapshots, the <code>--use-volume-snapshots=false</code> flag prevents an unused <code>VolumeSnapshotLocation</code> from being created on installation.</p>
<p>To see the YAML applied by the <code>velero install</code> command, use the <code>--dry-run -o yaml</code> arguments.</p>
<p>For more complex installation needs, use either the generated YAML, or the Helm chart.</p>
<h2 id="on-premises">On-premises</h2>
<p>You can run Velero in an on-premises cluster in different ways depending on your requirements.</p>
<p>First, you must select an object storage backend that Velero can use to store backup data. 

    

<a href="/docs/v1.0.0/support-matrix/">Compatible Storage Providers</a> contains information on various
options that are supported or have been reported to work by users. 

<a href="https://www.minio.io">Minio</a> is an option if you want to keep your backup data on-premises and you are
not using another storage platform that offers an S3-compatible object storage API.</p>
<p>Second, if you need to back up persistent volume data, you must select a volume backup solution. 

    

<a href="/docs/v1.0.0/support-matrix/">Volume Snapshot Providers</a> contains information on
the supported options. For example, if you use 

<a href="https://portworx.com">Portworx</a> for persistent storage, you can install their Velero plugin to get native Portworx snapshots as part
of your Velero backups. If there is no native snapshot plugin available for your storage platform, you can use Velero&rsquo;s 

    

<a href="/docs/v1.0.0/restic/">restic integration</a>, which provides a
platform-agnostic backup solution for volume data.</p>
<h2 id="customize-configuration">Customize configuration</h2>
<p>Whether you run Velero on a cloud provider or on-premises, if you have more than one volume snapshot location for a given volume provider, you can specify its default location for backups by setting a server flag in your Velero deployment YAML.</p>
<p>For details, see the documentation topics for individual cloud providers.</p>
<h2 id="removing-velero">Removing Velero</h2>
<p>If you would like to completely uninstall Velero from your cluster, the following commands will remove all resources created by <code>velero install</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl delete namespace/velero clusterrolebinding/velero
kubectl delete crds -l component<span style="color:#f92672">=</span>velero
</code></pre></div><h2 id="installing-with-the-helm-chart">Installing with the Helm chart</h2>
<p>When installing using the Helm chart, the provider&rsquo;s credential information will need to be appended into your values.</p>
<p>The easiest way to do this is with the <code>--set-file</code> argument, available in Helm 2.10 and higher.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helm install --set-file credentials.secretContents.cloud<span style="color:#f92672">=</span>./credentials-velero stable/velero
</code></pre></div><p>See your cloud provider&rsquo;s documentation for the contents and creation of the <code>credentials-velero</code> file.</p>
<h2 id="examples">Examples</h2>
<p>After you set up the Velero server, try these examples:</p>
<h3 id="basic-example-without-persistentvolumes">Basic example (without PersistentVolumes)</h3>
<ol>
<li>
<p>Start the sample nginx app:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f examples/nginx-app/base.yaml
</code></pre></div></li>
<li>
<p>Create a backup:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">velero backup create nginx-backup --include-namespaces nginx-example
</code></pre></div></li>
<li>
<p>Simulate a disaster:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl delete namespaces nginx-example
</code></pre></div><p>Wait for the namespace to be deleted.</p>
</li>
<li>
<p>Restore your lost resources:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">velero restore create --from-backup nginx-backup
</code></pre></div></li>
</ol>
<h3 id="snapshot-example-with-persistentvolumes">Snapshot example (with PersistentVolumes)</h3>
<blockquote>
<p>NOTE: For Azure, you must run Kubernetes version 1.7.2 or later to support PV snapshotting of managed disks.</p>
</blockquote>
<ol>
<li>
<p>Start the sample nginx app:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f examples/nginx-app/with-pv.yaml
</code></pre></div></li>
<li>
<p>Create a backup with PV snapshotting:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">velero backup create nginx-backup --include-namespaces nginx-example
</code></pre></div></li>
<li>
<p>Simulate a disaster:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl delete namespaces nginx-example
</code></pre></div><p>Because the default 

<a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#reclaiming">reclaim policy</a> for dynamically-provisioned PVs is &ldquo;Delete&rdquo;, these commands should trigger your cloud provider to delete the disk that backs the PV. Deletion is asynchronous, so this may take some time. <strong>Before continuing to the next step, check your cloud provider to confirm that the disk no longer exists.</strong></p>
</li>
<li>
<p>Restore your lost resources:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">velero restore create --from-backup nginx-backup
</code></pre></div></li>
</ol>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section section-background-darkest-blue">
    <div class="section-content">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-lg-8">
                <h5>Getting Started</h5>
                <p>To help you get started, see the documentation.</p>
            </div>
            <div class="col-xs-12 col-sm-6 col-lg-3 offset-lg-1">
                <p><strong></strong></p>
                <a href="/docs"
                   class="btn btn-sm btn-primary btn-no-border">Documentation</a>
            </div>
        </div>
    </div>
</div>

<footer class="section site-footer">
    <div class="section-content">
        <div class="row justify-content-between align-items-center">
            <div class="col-12 col-md-8 mb-3 mb-md-0">
                <ul class="social-links text-center text-md-left">
                    
                        <li>
                            
                                <i class="fab fa-twitter fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://twitter.com/projectvelero">Twitter</a>
                        </li>
                    
                        <li>
                            
                                <i class="fab fa-slack fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://kubernetes.slack.com/messages/velero">Slack</a>
                        </li>
                    
                        <li>
                            
                                <i class="fas fa-users fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://groups.google.com/forum/#!forum/projectvelero">Google Groups</a>
                        </li>
                    
                        <li>
                            
                                <i class="fa fa-rss fa-lg fa-fw mr-1"></i>
                            
                            <a href="feed.xml">RSS</a>
                        </li>
                    
                        <li>
                            
                                <i class="fab fa-github fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://github.com/vmware-tanzu/velero">GitHub</a>
                        </li>
                    
                </ul>
            </div>
            <div class="col-12 col-md-4 text-center text-md-right">
                <a href="/" aria-label="Velero homepage"><img src="/img/Velero.svg" class="logo"
                                                              alt="Homepage"/></a>
            </div>
        </div>
        <div class="row align-items-center">
            <div class="col copyright text-center text-md-right mt-4">
                &copy; 2020 Velero Authors.
                <a href="http://vmware.github.io/" class="vm-logo">A VMware-backed project. <img
                            src="/img/vm-logo.png" alt="VMware logo"/></a>
            </div>
        </div>
    </div>
</footer>


<script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js"
        integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>

<script src="/js/jquery.matchHeight.js?1593121911"></script>
<script src="/js/scripts.js?1593121911"></script>

    </div>
</div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
        apiKey: '3d80f66bb5ecf85f8e2760caef383f24',
        indexName: 'velero',
        inputSelector: '.docsearch-input',
        algoliaOptions: {'facetFilters': ["version:v1.0.0"]},
        debug: false 
    });
</script>
</body>

</html>
