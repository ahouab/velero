<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/styles.666a5dc1cd80e47092a71103358e46b56345de6f3044680f856f219cbc2fe91b.css" integrity="sha256-Zmpdwc2A5HCSpxEDNY5GtWNF3m8wRGgPhW8hnLwv6Rs=">

</head>



    
    <meta name="robots" content="noindex">




    <title>Velero Docs - </title>


<body id="docs">
<div class="container-fluid site-outer-container">
    <div class="site-container">
        <header class="site-header">
    <div class="site-header-content">
        <div class="logo">
            <a href="/" aria-label="Velero homepage"><img src="/img/Velero.svg" class="logo" alt="Homepage"/></a>
        </div>
        <ul class="nav-menu" id="header-nav">
            <li class="home"><a href="/" title="Velero">Home</a></li>
            <li class="docs"><a href="/docs/v1.4" title="Documentation">Documentation</a></li>
            <li class="plugins"><a href="/plugins" title="Plugins">Plugins</a></li>
            <li class="blog"><a href="/blog" title="Blog Posts">Blog</a></li>
            <li class="community"><a href="/community" title="Community">Community</a></li>
            <li class="resources"><a href="/resources" title="Resources">Resources</a></li>
        </ul>
        <div class="nav-mobile-link">
            <a href="javascript:void(0);" id="nav-mobile-toggle"></a>
        </div>
    </div>
</header>

        <div class="post-single-hero post-single-hero-short bg-color-med-blue">
            <div class="section">
                <div class="section-content">
                    <h1>Documentation</h1>
                </div>
            </div>
        </div>
        <div class="section section-card pt-4 pb-0">
            <div class="container container-max">
                <div class="row">
                    <div class="col-md-3 toc">
                        <div class="row">
    <div class="dropdown mb-2">
        
            <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                master
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                
                
                

                
                    
                    <a class="dropdown-item"
                       href="/docs/master/on-premises/">master</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.4/on-premises/">v1.4</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.2/on-premises/">v1.3.2</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.1/on-premises/">v1.3.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.0/on-premises/">v1.3.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.2.0/on-premises/">v1.2.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.1.0/on-premises/">v1.1.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.0.0/on-premises/">v1.0.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.11.0/on-premises/">v0.11.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.10.0/on-premises/">v0.10.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.9.0/on-premises/">v0.9.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.8.1/on-premises/">v0.8.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.8.0/on-premises/">v0.8.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.7.1/on-premises/">v0.7.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.7.0/on-premises/">v0.7.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.6.0/on-premises/">v0.6.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.5.0/on-premises/">v0.5.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.4.0/on-premises/">v0.4.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.3.0/on-premises/">v0.3.0</a>
                
            </div>
        
    </div>
</div>
                        <br/>
                        <form class="d-flex align-items-center">
                          <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
                            <input type="search" class="form-control docsearch-input" id="search-input" placeholder="Search..."
                                   aria-label="Search for..." autocomplete="off" spellcheck="false" role="combobox"
                                   aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0"
                                   dir="auto" style="position: relative; vertical-align: top;">
                          </span>
                        </form>
                        <nav class="navigation">
    
    
    
        
        
        
        

        
            <h3>Introduction</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/index.html">About Velero</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/how-velero-works">How Velero works</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/locations">About locations</a>
                        
                    </li>
                
            </ul>
        
            <h3>Install</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/basic-install">Basic Install</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/customize-installation">Customize Installation</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/upgrade-to-1.3">Upgrade to 1.3</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/supported-providers">Supported providers</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/contributions/minio">Evaluation install</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/restic">Restic integration</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/examples">Examples</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/uninstalling">Uninstalling</a>
                        
                    </li>
                
            </ul>
        
            <h3>Use</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/disaster-case">Disaster recovery</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/migration-case">Cluster migration</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/backup-reference">Backup reference</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/restore-reference">Restore reference</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/namespace">Run in any namespace</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/hooks">Extend with hooks</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/csi">CSI Support (beta)</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/self-signed-certificates">Verifying Self-signed Certificates</a>
                        
                    </li>
                
            </ul>
        
            <h3>Plugins</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/overview-plugins">Overview</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/custom-plugins">Custom plugins</a>
                        
                    </li>
                
            </ul>
        
            <h3>Troubleshoot</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/troubleshooting">Troubleshooting</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/debugging-install">Troubleshoot an install or setup</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/debugging-restores">Troubleshoot a restore</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/restic#troubleshooting">Troubleshoot Restic</a>
                        
                    </li>
                
            </ul>
        
            <h3>Contribute</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/start-contributing">Start Contributing</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/development">Development</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/build-from-source">Build from source</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/run-locally">Run locally</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/code-standards">Code standards</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/website-guidelines">Website guidelines</a>
                        
                    </li>
                
            </ul>
        
            <h3>More information</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/output-file-format">Backup file format</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/api-types">API types</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/faq">FAQ</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/zenhub">ZenHub</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/support-process">Support Process</a>
                        
                    </li>
                
            </ul>
        
    
</nav>

                    </div>
                    <div class="col-md-8">
                        
    
    <div class="alert alert-primary" role="alert">
        
            <p>
                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                This is the documentation for the latest development version of Velero. Both code and docs may be
                unstable, and these docs are not guaranteed to be up to date or correct. See the
                <a href="/docs/v1.4/on-premises/">latest version</a>.
            </p>
        
    </div>

                        <div class="documentation-container">
                            <h1 id="on-premises-environments">On-Premises Environments</h1>
<p>You can run Velero in an on-premises cluster in different ways depending on your requirements.</p>
<h3 id="selecting-an-object-storage-provider">Selecting an object storage provider</h3>
<p>You must select an object storage backend that Velero can use to store backup data. 

    

<a href="/docs/master/supported-providers/">Supported providers</a> contains information on various
options that are supported or have been reported to work by users.</p>
<p>If you do not already have an object storage system, 

<a href="https://min.io">MinIO</a> is an open-source S3-compatible object storage system that can be installed on-premises and is compatible with Velero. The details of configuring it for production usage are out of scope for Velero&rsquo;s documentation, but an 

    

<a href="/docs/master/contributions/minio/">evaluation install guide</a> using MinIO is provided for convenience.</p>
<h3 id="optional-selecting-volume-snapshot-providers">(Optional) Selecting volume snapshot providers</h3>
<p>If you need to back up persistent volume data, you must select a volume backup solution. 

    

<a href="/docs/master/supported-providers/">Supported providers</a> contains information on the supported options.</p>
<p>For example, if you use 

<a href="https://portworx.com">Portworx</a> for persistent storage, you can install their Velero plugin to get native Portworx snapshots as part of your Velero backups.</p>
<p>If there is no native snapshot plugin available for your storage platform, you can use Velero&rsquo;s 

    

<a href="/docs/master/restic/">restic integration</a>, which provides a platform-agnostic file-level backup solution for volume data.</p>
<h3 id="air-gapped-deployments">Air-gapped deployments</h3>
<p>In an air-gapped deployment, there is no access to the public internet, and therefore no access to public container registries.</p>
<p>In these scenarios, you will need to make sure that you have an internal registry, such as 

<a href="https://goharbor.io/">Harbor</a>, installed and the Velero core and plugin images loaded into your internal registry.</p>
<p>Below you will find instructions to downloading the Velero images to your local machine, tagging them, then uploading them to your custom registry.</p>
<h4 id="preparing-the-velero-image">Preparing the Velero image</h4>
<p>First, download the Velero image, tag it for the your private registry, then upload it into the registry so that it can be pulled by your cluster.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">PRIVATE_REG<span style="color:#f92672">=</span>&lt;your private registry&gt;
VELERO_VERSION<span style="color:#f92672">=</span>&lt;version of Velero you<span style="color:#960050;background-color:#1e0010">&#39;</span>re targetting, e.g. v1.4.0&gt;

docker pull velero/velero:$VELERO_VERSION
docker tag velero/velero:$VELERO_VERSION $PRIVATE_REG/velero:$VELERO_VERSION
docker push $PRIVATE_REG/velero:$VELERO_VERSION
</code></pre></div><h4 id="preparing-plugin-images">Preparing plugin images</h4>
<p>Next, repeat these steps for any plugins you may need. This example will use the AWS plugin, but the plugin name should be replaced with the plugins you will need.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">PRIVATE_REG<span style="color:#f92672">=</span>&lt;your private registry&gt;
PLUGIN_VERSION<span style="color:#f92672">=</span>&lt;version of plugin you<span style="color:#960050;background-color:#1e0010">&#39;</span>re targetting, e.g. v1.0.2&gt;

docker pull velero/velero-plugin-for-aws:$PLUGIN_VERSION
docker tag velero/velero-plugin-for-aws:$PLUGIN_VERSION $PRIVATE_REG/velero-plugin-for-aws:$PLUGIN_VERSION
docker push $PRIVATE_REG/velero-plugin-for-aws:$PLUGIN_VERSION
</code></pre></div><h4 id="preparing-the-restic-helper-image-optional">Preparing the restic helper image (optional)</h4>
<p>If you are using restic, you will also need to upload the restic helper image.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">PRIVATE_REG<span style="color:#f92672">=</span>&lt;your private registry&gt;
VELERO_VERSION<span style="color:#f92672">=</span>&lt;version of Velero you<span style="color:#960050;background-color:#1e0010">&#39;</span>re targetting, e.g. v1.4.0&gt;

docker pull velero/velero-restic-restore-helper:$VELERO_VERSION
docker tag velero/velero-restic-restore-helper:$VELERO_VERSION $PRIVATE_REG/velero-restic-restore-helper:$VELERO_VERSION
docker push $PRIVATE_REG/velero-restic-restore-helper:$VELERO_VERSION
</code></pre></div><h4 id="pulling-specific-architecture-images-optional">Pulling specific architecture images (optional)</h4>
<p>Velero uses Docker manifests for its images, allowing Docker to pull the image needed based on your client machine&rsquo;s architecture.</p>
<p>If you need to pull a specific image, you should replace the <code>velero/velero</code> image with the specific architecture image, such as <code>velero/velero-arm</code>.</p>
<p>To see an up-to-date list of architectures, be sure to enable Docker experimental features and use <code>docker manifest inspect velero/velero</code> (or whichever image you&rsquo;re interested in), and join the architecture string to the end of the image name with <code>-</code>.</p>
<h4 id="installing-velero">Installing Velero</h4>
<p>By default, <code>velero install</code> will use the public <code>velero/velero</code> image. When using an air-gapped deployment, use your private registry&rsquo;s image for Velero and your private registry&rsquo;s images for any plugins.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">velero install <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> --image<span style="color:#f92672">=</span>$PRIVATE_REG/velero:$VELERO_VERSION <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> --plugin<span style="color:#f92672">=</span>$PRIVATE_REG/velero-plugin-for-aws:$PLUGIN_VERSION <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>&lt;....&gt;
</code></pre></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section section-background-darkest-blue">
    <div class="section-content">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-lg-8">
                <h5>Getting Started</h5>
                <p>To help you get started, see the documentation.</p>
            </div>
            <div class="col-xs-12 col-sm-6 col-lg-3 offset-lg-1">
                <p><strong></strong></p>
                <a href="/docs"
                   class="btn btn-sm btn-primary btn-no-border">Documentation</a>
            </div>
        </div>
    </div>
</div>

<footer class="section site-footer">
    <div class="section-content">
        <div class="row justify-content-between align-items-center">
            <div class="col-12 col-md-8 mb-3 mb-md-0">
                <ul class="social-links text-center text-md-left">
                    
                        <li>
                            
                                <i class="fab fa-twitter fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://twitter.com/projectvelero">Twitter</a>
                        </li>
                    
                        <li>
                            
                                <i class="fab fa-slack fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://kubernetes.slack.com/messages/velero">Slack</a>
                        </li>
                    
                        <li>
                            
                                <i class="fas fa-users fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://groups.google.com/forum/#!forum/projectvelero">Google Groups</a>
                        </li>
                    
                        <li>
                            
                                <i class="fa fa-rss fa-lg fa-fw mr-1"></i>
                            
                            <a href="feed.xml">RSS</a>
                        </li>
                    
                        <li>
                            
                                <i class="fab fa-github fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://github.com/vmware-tanzu/velero">GitHub</a>
                        </li>
                    
                </ul>
            </div>
            <div class="col-12 col-md-4 text-center text-md-right">
                <a href="/" aria-label="Velero homepage"><img src="/img/Velero.svg" class="logo"
                                                              alt="Homepage"/></a>
            </div>
        </div>
        <div class="row align-items-center">
            <div class="col copyright text-center text-md-right mt-4">
                &copy; 2020 Velero Authors.
                <a href="http://vmware.github.io/" class="vm-logo">A VMware-backed project. <img
                            src="/img/vm-logo.png" alt="VMware logo"/></a>
            </div>
        </div>
    </div>
</footer>


<script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js"
        integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>

<script src="/js/jquery.matchHeight.js?1593121911"></script>
<script src="/js/scripts.js?1593121911"></script>

    </div>
</div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
        apiKey: '3d80f66bb5ecf85f8e2760caef383f24',
        indexName: 'velero',
        inputSelector: '.docsearch-input',
        algoliaOptions: {'facetFilters': ["version:master"]},
        debug: false 
    });
</script>
</body>

</html>
