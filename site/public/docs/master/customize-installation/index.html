<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/styles.666a5dc1cd80e47092a71103358e46b56345de6f3044680f856f219cbc2fe91b.css" integrity="sha256-Zmpdwc2A5HCSpxEDNY5GtWNF3m8wRGgPhW8hnLwv6Rs=">

</head>



    
    <meta name="robots" content="noindex">




    <title>Velero Docs - </title>


<body id="docs">
<div class="container-fluid site-outer-container">
    <div class="site-container">
        <header class="site-header">
    <div class="site-header-content">
        <div class="logo">
            <a href="/" aria-label="Velero homepage"><img src="/img/Velero.svg" class="logo" alt="Homepage"/></a>
        </div>
        <ul class="nav-menu" id="header-nav">
            <li class="home"><a href="/" title="Velero">Home</a></li>
            <li class="docs"><a href="/docs/v1.4" title="Documentation">Documentation</a></li>
            <li class="plugins"><a href="/plugins" title="Plugins">Plugins</a></li>
            <li class="blog"><a href="/blog" title="Blog Posts">Blog</a></li>
            <li class="community"><a href="/community" title="Community">Community</a></li>
            <li class="resources"><a href="/resources" title="Resources">Resources</a></li>
        </ul>
        <div class="nav-mobile-link">
            <a href="javascript:void(0);" id="nav-mobile-toggle"></a>
        </div>
    </div>
</header>

        <div class="post-single-hero post-single-hero-short bg-color-med-blue">
            <div class="section">
                <div class="section-content">
                    <h1>Documentation</h1>
                </div>
            </div>
        </div>
        <div class="section section-card pt-4 pb-0">
            <div class="container container-max">
                <div class="row">
                    <div class="col-md-3 toc">
                        <div class="row">
    <div class="dropdown mb-2">
        
            <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                master
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                
                
                

                
                    
                    <a class="dropdown-item"
                       href="/docs/master/customize-installation/">master</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.4/customize-installation/">v1.4</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.2/customize-installation/">v1.3.2</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.1/customize-installation/">v1.3.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.0/customize-installation/">v1.3.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.2.0/customize-installation/">v1.2.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.1.0/customize-installation/">v1.1.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.0.0/customize-installation/">v1.0.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.11.0/customize-installation/">v0.11.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.10.0/customize-installation/">v0.10.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.9.0/customize-installation/">v0.9.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.8.1/customize-installation/">v0.8.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.8.0/customize-installation/">v0.8.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.7.1/customize-installation/">v0.7.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.7.0/customize-installation/">v0.7.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.6.0/customize-installation/">v0.6.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.5.0/customize-installation/">v0.5.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.4.0/customize-installation/">v0.4.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.3.0/customize-installation/">v0.3.0</a>
                
            </div>
        
    </div>
</div>
                        <br/>
                        <form class="d-flex align-items-center">
                          <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
                            <input type="search" class="form-control docsearch-input" id="search-input" placeholder="Search..."
                                   aria-label="Search for..." autocomplete="off" spellcheck="false" role="combobox"
                                   aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0"
                                   dir="auto" style="position: relative; vertical-align: top;">
                          </span>
                        </form>
                        <nav class="navigation">
    
    
    
        
        
        
        

        
            <h3>Introduction</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/index.html">About Velero</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/how-velero-works">How Velero works</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/locations">About locations</a>
                        
                    </li>
                
            </ul>
        
            <h3>Install</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/basic-install">Basic Install</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/customize-installation">Customize Installation</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/upgrade-to-1.3">Upgrade to 1.3</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/supported-providers">Supported providers</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/contributions/minio">Evaluation install</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/restic">Restic integration</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/examples">Examples</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/uninstalling">Uninstalling</a>
                        
                    </li>
                
            </ul>
        
            <h3>Use</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/disaster-case">Disaster recovery</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/migration-case">Cluster migration</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/backup-reference">Backup reference</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/restore-reference">Restore reference</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/namespace">Run in any namespace</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/hooks">Extend with hooks</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/csi">CSI Support (beta)</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/self-signed-certificates">Verifying Self-signed Certificates</a>
                        
                    </li>
                
            </ul>
        
            <h3>Plugins</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/overview-plugins">Overview</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/custom-plugins">Custom plugins</a>
                        
                    </li>
                
            </ul>
        
            <h3>Troubleshoot</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/troubleshooting">Troubleshooting</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/debugging-install">Troubleshoot an install or setup</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/debugging-restores">Troubleshoot a restore</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/restic#troubleshooting">Troubleshoot Restic</a>
                        
                    </li>
                
            </ul>
        
            <h3>Contribute</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/start-contributing">Start Contributing</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/development">Development</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/build-from-source">Build from source</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/run-locally">Run locally</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/code-standards">Code standards</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/website-guidelines">Website guidelines</a>
                        
                    </li>
                
            </ul>
        
            <h3>More information</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/master/output-file-format">Backup file format</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/api-types">API types</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/faq">FAQ</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/zenhub">ZenHub</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/master/support-process">Support Process</a>
                        
                    </li>
                
            </ul>
        
    
</nav>

                    </div>
                    <div class="col-md-8">
                        
    
    <div class="alert alert-primary" role="alert">
        
            <p>
                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                This is the documentation for the latest development version of Velero. Both code and docs may be
                unstable, and these docs are not guaranteed to be up to date or correct. See the
                <a href="/docs/v1.4/customize-installation/">latest version</a>.
            </p>
        
    </div>

                        <div class="documentation-container">
                            <h1 id="customize-velero-install">Customize Velero Install</h1>
<ul>
<li>

    

<a href="">Customize Velero Install</a>
<ul>
<li>

    

<a href="">Plugins</a></li>
<li>

    

<a href="">Install in any namespace</a></li>
<li>

    

<a href="">Use non-file-based identity mechanisms</a></li>
<li>

    

<a href="">Enable restic integration</a></li>
<li>

    

<a href="">Enable features</a>
<ul>
<li>

    

<a href="">Enable server side features</a></li>
<li>

    

<a href="">Enable client side features</a></li>
</ul>
</li>
<li>

    

<a href="">Customize resource requests and limits</a></li>
<li>

    

<a href="">Configure more than one storage location for backups or volume snapshots</a></li>
<li>

    

<a href="">Do not configure a backup storage location during install</a></li>
<li>

    

<a href="">Install an additional volume snapshot provider</a></li>
<li>

    

<a href="">Generate YAML only</a></li>
<li>

    

<a href="">Use a storage provider secured by a self-signed certificate</a></li>
<li>

    

<a href="">Additional options</a></li>
<li>

    

<a href="">Optional Velero CLI configurations</a>
<ul>
<li>

    

<a href="">Enabling shell autocompletion</a>
<ul>
<li>

    

<a href="">Bash on Linux</a>
<ul>
<li>

    

<a href="">Install bash-completion</a></li>
<li>

    

<a href="">Enable Velero CLI autocompletion for Bash on Linux</a></li>
</ul>
</li>
<li>

    

<a href="">Bash on macOS</a>
<ul>
<li>

    

<a href="">Install bash-completion</a></li>
<li>

    

<a href="">Enable Velero CLI autocompletion for Bash on macOS</a></li>
</ul>
</li>
<li>

    

<a href="">Autocompletion on Zsh</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="plugins">Plugins</h2>
<p>During install, Velero requires that at least one plugin is added (with the <code>--plugins</code> flag). Please see the documentation under 

    

<a href="/docs/master/overview-plugins/">Plugins</a></p>
<h2 id="install-in-any-namespace">Install in any namespace</h2>
<p>Velero is installed in the <code>velero</code> namespace by default. However, you can install Velero in any namespace. See 

    

<a href="/docs/master/namespace/">run in custom namespace</a> for details.</p>
<h2 id="use-non-file-based-identity-mechanisms">Use non-file-based identity mechanisms</h2>
<p>By default, <code>velero install</code> expects a credentials file for your <code>velero</code> IAM account to be provided via the <code>--secret-file</code> flag.</p>
<p>If you are using an alternate identity mechanism, such as kube2iam/kiam on AWS, Workload Identity on GKE, etc., that does not require a credentials file, you can specify the <code>--no-secret</code> flag instead of <code>--secret-file</code>.</p>
<h2 id="enable-restic-integration">Enable restic integration</h2>
<p>By default, <code>velero install</code> does not install Velero&rsquo;s 

    

<a href="/docs/master/restic/">restic integration</a>. To enable it, specify the <code>--use-restic</code> flag.</p>
<p>If you&rsquo;ve already run <code>velero install</code> without the <code>--use-restic</code> flag, you can run the same command again, including the <code>--use-restic</code> flag, to add the restic integration to your existing install.</p>
<h2 id="enable-features">Enable features</h2>
<p>New features in Velero will be released as beta features behind feature flags which are not enabled by default. A full listing of Velero feature flags can be found 

<a href="https://github.com/vmware-tanzu/velero/blob/master/pkg/apis/velero/v1/constants.go">here</a>.</p>
<h3 id="enable-server-side-features">Enable server side features</h3>
<p>Features on the Velero server can be enabled using the <code>--features</code> flag to the <code>velero install</code> command. This flag takes as value a comma separated list of feature flags to enable. As an example 

    

<a href="/docs/master/csi/">CSI snapshotting of PVCs</a> can be enabled using <code>EnableCSI</code> feature flag in the <code>velero install</code> command as shown below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">velero install --features<span style="color:#f92672">=</span>EnableCSI
</code></pre></div><p>Feature flags, passed to <code>velero install</code> will be passed to the Velero deployment and also to the <code>restic</code> daemon set, if <code>--use-restic</code> flag is used.</p>
<p>Similarly, features may be disabled by removing the corresponding feature flags from the <code>--features</code> flag.</p>
<p>Enabling and disabling feature flags will require modifying the Velero deployment and also the restic daemonset. This may be done from the CLI by uninstalling and re-installing Velero, or by editing the <code>deploy/velero</code> and <code>daemonset/restic</code> resources in-cluster.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl -n velero edit deploy/velero
$ kubectl -n velero edit daemonset/restic
</code></pre></div><h3 id="enable-client-side-features">Enable client side features</h3>
<p>For some features it may be necessary to use the <code>--features</code> flag to the Velero client. This may be done by passing the <code>--features</code> on every command run using the Velero CLI or the by setting the features in the velero client config file using the <code>velero client config set</code> command as shown below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">velero client config set features<span style="color:#f92672">=</span>EnableCSI
</code></pre></div><p>This stores the config in a file at <code>$HOME/.config/velero/config.json</code>.</p>
<p>All client side feature flags may be disabled using the below command</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">velero client config set features<span style="color:#f92672">=</span>
</code></pre></div><h2 id="customize-resource-requests-and-limits">Customize resource requests and limits</h2>
<p>By default, the Velero deployment requests 500m CPU, 128Mi memory and sets a limit of 1000m CPU, 256Mi.
Default requests and limits are not set for the restic pods as CPU/Memory usage can depend heavily on the size of volumes being backed up.</p>
<p>Customization of these resource requests and limits may be performed using the 

    

<a href="/docs/master/velero-install/">velero install</a> CLI command.</p>
<h2 id="configure-more-than-one-storage-location-for-backups-or-volume-snapshots">Configure more than one storage location for backups or volume snapshots</h2>
<p>Velero supports any number of backup storage locations and volume snapshot locations. For more details, see 

    

<a href="/docs/master/locations/">about locations</a>.</p>
<p>However, <code>velero install</code> only supports configuring at most one backup storage location and one volume snapshot location.</p>
<p>To configure additional locations after running <code>velero install</code>, use the <code>velero backup-location create</code> and/or <code>velero snapshot-location create</code> commands along with provider-specific configuration. Use the <code>--help</code> flag on each of these commands for more details.</p>
<h2 id="do-not-configure-a-backup-storage-location-during-install">Do not configure a backup storage location during install</h2>
<p>If you need to install Velero without a default backup storage location (without specifying <code>--bucket</code> or <code>--provider</code>), the <code>--no-default-backup-location</code> flag is required for confirmation.</p>
<h2 id="install-an-additional-volume-snapshot-provider">Install an additional volume snapshot provider</h2>
<p>Velero supports using different providers for volume snapshots than for object storage &ndash; for example, you can use AWS S3 for object storage, and Portworx for block volume snapshots.</p>
<p>However, <code>velero install</code> only supports configuring a single matching provider for both object storage and volume snapshots.</p>
<p>To use a different volume snapshot provider:</p>
<ol>
<li>
<p>Install the Velero server components by following the instructions for your <strong>object storage</strong> provider</p>
</li>
<li>
<p>Add your volume snapshot provider&rsquo;s plugin to Velero (look in [your provider][0]&rsquo;s documentation for the image name):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">velero plugin add &lt;registry/image:version&gt;
</code></pre></div></li>
<li>
<p>Add a volume snapshot location for your provider, following [your provider][0]&rsquo;s documentation for configuration:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">velero snapshot-location create &lt;NAME&gt; <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --provider &lt;PROVIDER-NAME&gt; <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#f92672">[</span>--config &lt;PROVIDER-CONFIG&gt;<span style="color:#f92672">]</span>
</code></pre></div></li>
</ol>
<h2 id="generate-yaml-only">Generate YAML only</h2>
<p>By default, <code>velero install</code> generates and applies a customized set of Kubernetes configuration (YAML) to your cluster.</p>
<p>To generate the YAML without applying it to your cluster, use the <code>--dry-run -o yaml</code> flags.</p>
<p>This is useful for applying bespoke customizations, integrating with a GitOps workflow, etc.</p>
<p>If you are installing Velero in Kubernetes 1.14.x or earlier, you need to use <code>kubectl apply</code>'s <code>--validate=false</code> option when applying the generated configuration to your cluster. See 

<a href="https://github.com/vmware-tanzu/velero/issues/2077">issue 2077</a> and 

<a href="https://github.com/vmware-tanzu/velero/issues/2311">issue 2311</a> for more context.</p>
<h2 id="use-a-storage-provider-secured-by-a-self-signed-certificate">Use a storage provider secured by a self-signed certificate</h2>
<p>If you intend to use Velero with a storage provider that is secured by a self-signed certificate,
you may need to instruct Velero to trust that certificate. See 

    

<a href="/docs/master/self-signed-certificates/">use Velero with a storage provider secured by a self-signed certificate</a> for details.</p>
<h2 id="additional-options">Additional options</h2>
<p>Run <code>velero install --help</code> or see the 

<a href="https://vmware-tanzu.github.io/helm-charts/">Helm chart documentation</a> for the full set of installation options.</p>
<h2 id="optional-velero-cli-configurations">Optional Velero CLI configurations</h2>
<h3 id="enabling-shell-autocompletion">Enabling shell autocompletion</h3>
<p><strong>Velero CLI</strong> provides autocompletion support for <code>Bash</code> and <code>Zsh</code>, which can save you a lot of typing.</p>
<p>Below are the procedures to set up autocompletion for <code>Bash</code> (including the difference between <code>Linux</code> and <code>macOS</code>) and <code>Zsh</code>.</p>
<h4 id="bash-on-linux">Bash on Linux</h4>
<p>The <strong>Velero CLI</strong> completion script for <code>Bash</code> can be generated with the command <code>velero completion bash</code>. Sourcing the completion script in your shell enables velero autocompletion.</p>
<p>However, the completion script depends on 

<a href="https://github.com/scop/bash-completion"><strong>bash-completion</strong></a>, which means that you have to install this software first (you can test if you have bash-completion already installed by running <code>type _init_completion</code>).</p>
<h5 id="install-bash-completion">Install bash-completion</h5>
<p><code>bash-completion</code> is provided by many package managers (see 

<a href="https://github.com/scop/bash-completion#installation">here</a>). You can install it with <code>apt-get install bash-completion</code> or <code>yum install bash-completion</code>, etc.</p>
<p>The above commands create <code>/usr/share/bash-completion/bash_completion</code>, which is the main script of bash-completion. Depending on your package manager, you have to manually source this file in your <code>~/.bashrc</code> file.</p>
<p>To find out, reload your shell and run <code>type _init_completion</code>. If the command succeeds, you&rsquo;re already set, otherwise add the following to your <code>~/.bashrc</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">source /usr/share/bash-completion/bash_completion
</code></pre></div><p>Reload your shell and verify that bash-completion is correctly installed by typing <code>type _init_completion</code>.</p>
<h5 id="enable-velero-cli-autocompletion-for-bash-on-linux">Enable Velero CLI autocompletion for Bash on Linux</h5>
<p>You now need to ensure that the <strong>Velero CLI</strong> completion script gets sourced in all your shell sessions. There are two ways in which you can do this:</p>
<ul>
<li>
<p>Source the completion script in your <code>~/.bashrc</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">echo <span style="color:#e6db74">&#39;source &lt;(velero completion bash)&#39;</span> &gt;&gt;~/.bashrc
</code></pre></div></li>
<li>
<p>Add the completion script to the <code>/etc/bash_completion.d</code> directory:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">velero completion bash &gt;/etc/bash_completion.d/velero
</code></pre></div></li>
<li>
<p>If you have an alias for velero, you can extend shell completion to work with that alias:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">echo <span style="color:#e6db74">&#39;alias v=velero&#39;</span> &gt;&gt;~/.bashrc
echo <span style="color:#e6db74">&#39;complete -F __start_velero v&#39;</span> &gt;&gt;~/.bashrc
</code></pre></div></li>
</ul>
<blockquote>
<p><code>bash-completion</code> sources all completion scripts in <code>/etc/bash_completion.d</code>.</p>
</blockquote>
<p>Both approaches are equivalent. After reloading your shell, velero autocompletion should be working.</p>
<h4 id="bash-on-macos">Bash on macOS</h4>
<p>The <strong>Velero CLI</strong> completion script for Bash can be generated with <code>velero completion bash</code>. Sourcing this script in your shell enables velero completion.</p>
<p>However, the velero completion script depends on 

<a href="https://github.com/scop/bash-completion"><strong>bash-completion</strong></a> which you thus have to previously install.</p>
<blockquote>
<p>There are two versions of bash-completion, v1 and v2. V1 is for Bash 3.2 (which is the default on macOS), and v2 is for Bash 4.1+. The velero completion script <strong>doesn&rsquo;t work</strong> correctly with bash-completion v1 and Bash 3.2. It requires <strong>bash-completion v2</strong> and <strong>Bash 4.1+</strong>. Thus, to be able to correctly use velero completion on macOS, you have to install and use Bash 4.1+ (

<a href="https://itnext.io/upgrading-bash-on-macos-7138bd1066ba"><em>instructions</em></a>). The following instructions assume that you use Bash 4.1+ (that is, any Bash version of 4.1 or newer).</p>
</blockquote>
<h5 id="install-bash-completion-1">Install bash-completion</h5>
<blockquote>
<p>As mentioned, these instructions assume you use Bash 4.1+, which means you will install bash-completion v2 (in contrast to Bash 3.2 and bash-completion v1, in which case kubectl completion won&rsquo;t work).</p>
</blockquote>
<p>You can test if you have bash-completion v2 already installed with <code>type _init_completion</code>. If not, you can install it with Homebrew:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">brew install bash-completion@2
</code></pre></div><p>As stated in the output of this command, add the following to your <code>~/.bashrc</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">export BASH_COMPLETION_COMPAT_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/usr/local/etc/bash_completion.d&#34;</span>
<span style="color:#f92672">[[</span> -r <span style="color:#e6db74">&#34;/usr/local/etc/profile.d/bash_completion.sh&#34;</span> <span style="color:#f92672">]]</span> <span style="color:#f92672">&amp;&amp;</span> . <span style="color:#e6db74">&#34;/usr/local/etc/profile.d/bash_completion.sh&#34;</span>
</code></pre></div><p>Reload your shell and verify that bash-completion v2 is correctly installed with <code>type _init_completion</code>.</p>
<h5 id="enable-velero-cli-autocompletion-for-bash-on-macos">Enable Velero CLI autocompletion for Bash on macOS</h5>
<p>You now have to ensure that the velero completion script gets sourced in all your shell sessions. There are multiple ways to achieve this:</p>
<ul>
<li>
<p>Source the completion script in your <code>~/.bashrc</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">echo <span style="color:#e6db74">&#39;source &lt;(velero completion bash)&#39;</span> &gt;&gt;~/.bashrc

</code></pre></div></li>
<li>
<p>Add the completion script to the <code>/usr/local/etc/bash_completion.d</code> directory:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">velero completion bash &gt;/usr/local/etc/bash_completion.d/velero
</code></pre></div></li>
<li>
<p>If you have an alias for velero, you can extend shell completion to work with that alias:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">echo <span style="color:#e6db74">&#39;alias v=velero&#39;</span> &gt;&gt;~/.bashrc
echo <span style="color:#e6db74">&#39;complete -F __start_velero v&#39;</span> &gt;&gt;~/.bashrc
</code></pre></div></li>
<li>
<p>If you installed velero with Homebrew (as explained 

    

<a href="">above</a>), then the velero completion script should already be in <code>/usr/local/etc/bash_completion.d/velero</code>. In that case, you don&rsquo;t need to do anything.</p>
</li>
</ul>
<blockquote>
<p>The Homebrew installation of bash-completion v2 sources all the files in the <code>BASH_COMPLETION_COMPAT_DIR</code> directory, that&rsquo;s why the latter two methods work.</p>
</blockquote>
<p>In any case, after reloading your shell, velero completion should be working.</p>
<h4 id="autocompletion-on-zsh">Autocompletion on Zsh</h4>
<p>The velero completion script for Zsh can be generated with the command <code>velero completion zsh</code>. Sourcing the completion script in your shell enables velero autocompletion.</p>
<p>To do so in all your shell sessions, add the following to your <code>~/.zshrc</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">source &lt;<span style="color:#f92672">(</span>velero completion zsh<span style="color:#f92672">)</span>
</code></pre></div><p>If you have an alias for kubectl, you can extend shell completion to work with that alias:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">echo <span style="color:#e6db74">&#39;alias v=velero&#39;</span> &gt;&gt;~/.zshrc
echo <span style="color:#e6db74">&#39;complete -F __start_velero v&#39;</span> &gt;&gt;~/.zshrc
</code></pre></div><p>After reloading your shell, kubectl autocompletion should be working.</p>
<p>If you get an error like <code>complete:13: command not found: compdef</code>, then add the following to the beginning of your <code>~/.zshrc</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">autoload -Uz compinit
compinit
</code></pre></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section section-background-darkest-blue">
    <div class="section-content">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-lg-8">
                <h5>Getting Started</h5>
                <p>To help you get started, see the documentation.</p>
            </div>
            <div class="col-xs-12 col-sm-6 col-lg-3 offset-lg-1">
                <p><strong></strong></p>
                <a href="/docs"
                   class="btn btn-sm btn-primary btn-no-border">Documentation</a>
            </div>
        </div>
    </div>
</div>

<footer class="section site-footer">
    <div class="section-content">
        <div class="row justify-content-between align-items-center">
            <div class="col-12 col-md-8 mb-3 mb-md-0">
                <ul class="social-links text-center text-md-left">
                    
                        <li>
                            
                                <i class="fab fa-twitter fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://twitter.com/projectvelero">Twitter</a>
                        </li>
                    
                        <li>
                            
                                <i class="fab fa-slack fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://kubernetes.slack.com/messages/velero">Slack</a>
                        </li>
                    
                        <li>
                            
                                <i class="fas fa-users fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://groups.google.com/forum/#!forum/projectvelero">Google Groups</a>
                        </li>
                    
                        <li>
                            
                                <i class="fa fa-rss fa-lg fa-fw mr-1"></i>
                            
                            <a href="feed.xml">RSS</a>
                        </li>
                    
                        <li>
                            
                                <i class="fab fa-github fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://github.com/vmware-tanzu/velero">GitHub</a>
                        </li>
                    
                </ul>
            </div>
            <div class="col-12 col-md-4 text-center text-md-right">
                <a href="/" aria-label="Velero homepage"><img src="/img/Velero.svg" class="logo"
                                                              alt="Homepage"/></a>
            </div>
        </div>
        <div class="row align-items-center">
            <div class="col copyright text-center text-md-right mt-4">
                &copy; 2020 Velero Authors.
                <a href="http://vmware.github.io/" class="vm-logo">A VMware-backed project. <img
                            src="/img/vm-logo.png" alt="VMware logo"/></a>
            </div>
        </div>
    </div>
</footer>


<script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js"
        integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>

<script src="/js/jquery.matchHeight.js?1593121911"></script>
<script src="/js/scripts.js?1593121911"></script>

    </div>
</div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
        apiKey: '3d80f66bb5ecf85f8e2760caef383f24',
        indexName: 'velero',
        inputSelector: '.docsearch-input',
        algoliaOptions: {'facetFilters': ["version:master"]},
        debug: false 
    });
</script>
</body>

</html>
