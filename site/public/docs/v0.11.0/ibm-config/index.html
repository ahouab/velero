<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/styles.666a5dc1cd80e47092a71103358e46b56345de6f3044680f856f219cbc2fe91b.css" integrity="sha256-Zmpdwc2A5HCSpxEDNY5GtWNF3m8wRGgPhW8hnLwv6Rs=">

</head>



    
    <meta name="robots" content="noindex">




    <title>Velero Docs - </title>


<body id="docs">
<div class="container-fluid site-outer-container">
    <div class="site-container">
        <header class="site-header">
    <div class="site-header-content">
        <div class="logo">
            <a href="/" aria-label="Velero homepage"><img src="/img/Velero.svg" class="logo" alt="Homepage"/></a>
        </div>
        <ul class="nav-menu" id="header-nav">
            <li class="home"><a href="/" title="Velero">Home</a></li>
            <li class="docs"><a href="/docs/v1.4" title="Documentation">Documentation</a></li>
            <li class="plugins"><a href="/plugins" title="Plugins">Plugins</a></li>
            <li class="blog"><a href="/blog" title="Blog Posts">Blog</a></li>
            <li class="community"><a href="/community" title="Community">Community</a></li>
            <li class="resources"><a href="/resources" title="Resources">Resources</a></li>
        </ul>
        <div class="nav-mobile-link">
            <a href="javascript:void(0);" id="nav-mobile-toggle"></a>
        </div>
    </div>
</header>

        <div class="post-single-hero post-single-hero-short bg-color-med-blue">
            <div class="section">
                <div class="section-content">
                    <h1>Documentation</h1>
                </div>
            </div>
        </div>
        <div class="section section-card pt-4 pb-0">
            <div class="container container-max">
                <div class="row">
                    <div class="col-md-3 toc">
                        <div class="row">
    <div class="dropdown mb-2">
        
            <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                v0.11.0
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                
                
                

                
                    
                    <a class="dropdown-item"
                       href="/docs/master/ibm-config/">master</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.4/ibm-config/">v1.4</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.2/ibm-config/">v1.3.2</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.1/ibm-config/">v1.3.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.3.0/ibm-config/">v1.3.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.2.0/ibm-config/">v1.2.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.1.0/ibm-config/">v1.1.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v1.0.0/ibm-config/">v1.0.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.11.0/ibm-config/">v0.11.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.10.0/ibm-config/">v0.10.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.9.0/ibm-config/">v0.9.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.8.1/ibm-config/">v0.8.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.8.0/ibm-config/">v0.8.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.7.1/ibm-config/">v0.7.1</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.7.0/ibm-config/">v0.7.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.6.0/ibm-config/">v0.6.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.5.0/ibm-config/">v0.5.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.4.0/ibm-config/">v0.4.0</a>
                
                    
                    <a class="dropdown-item"
                       href="/docs/v0.3.0/ibm-config/">v0.3.0</a>
                
            </div>
        
    </div>
</div>
                        <br/>
                        <form class="d-flex align-items-center">
                          <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
                            <input type="search" class="form-control docsearch-input" id="search-input" placeholder="Search..."
                                   aria-label="Search for..." autocomplete="off" spellcheck="false" role="combobox"
                                   aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0"
                                   dir="auto" style="position: relative; vertical-align: top;">
                          </span>
                        </form>
                        <nav class="navigation">
    
    
    
        
        
        
        

        
            <h3>Introduction</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/index.html">About Velero</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/get-started">Getting started</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/versions">Get the right Velero version</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/about">How Velero works</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/support-matrix">Supported platforms</a>
                        
                    </li>
                
            </ul>
        
            <h3>Upgrade</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/migrating-to-velero">Upgrade from Ark to Velero</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/locations">About locations</a>
                        
                    </li>
                
            </ul>
        
            <h3>Install</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/install-overview">Set up Velero</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/aws-config">Run on AWS</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/gcp-config">Run on GCP</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/azure-config">Run on Azure</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/ibm-config">IBM Cloud Object Store</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/restic">Restic Setup</a>
                        
                    </li>
                
            </ul>
        
            <h3>Troubleshooting</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/troubleshooting">Troubleshooting</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/debugging-install">Troubleshoot an install or setup</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/debugging-restores">Troubleshoot a restore</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/restic#troubleshooting">Troubleshoot Restic</a>
                        
                    </li>
                
            </ul>
        
            <h3>Customize Velero</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/build-from-scratch">Build from source</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/namespace">Run in any namespace</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/extend">Extend</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/plugins">Extend with plugins</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/hooks">Extend with hooks</a>
                        
                    </li>
                
            </ul>
        
            <h3>More information</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/output-file-format">Backup file format</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/api-types">API types</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/faq">FAQ</a>
                        
                    </li>
                
            </ul>
        
            <h3>Tutorials</h3>
            <ul>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/disaster-case">Disaster Recovery</a>
                        
                    </li>
                
                    <li>
                        
                            <a href="/docs/v0.11.0/migration-case">Cluster migration</a>
                        
                    </li>
                
            </ul>
        
    
</nav>

                    </div>
                    <div class="col-md-8">
                        
    
    <div class="alert alert-primary" role="alert">
        
            <p>
                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                Documentation for version v0.11.0 is no longer actively maintained.
                The version you are currently viewing is a static snapshot.
                For up-to-date documentation, see the <a href="/docs/v1.4/ibm-config/">latest version</a>.
            </p>
        
    </div>

                        <div class="documentation-container">
                            <h1 id="use-ibm-cloud-object-storage-as-veleros-storage-destination">Use IBM Cloud Object Storage as Velero&rsquo;s storage destination.</h1>
<p>You can deploy Velero on IBM 

<a href="https://console.bluemix.net/docs/containers/container_index.html#container_index">Public</a> or 

<a href="https://www.ibm.com/support/knowledgecenter/SSBS6K_2.1.0/kc_welcome_containers.html">Private</a> clouds, or even on any other Kubernetes cluster, but anyway you can use IBM Cloud Object Store as a destination for Velero&rsquo;s backups.</p>
<p>To set up IBM Cloud Object Storage (COS) as Velero&rsquo;s destination, you:</p>
<ul>
<li>Download an official release of Velero</li>
<li>Create your COS instance</li>
<li>Create an S3 bucket</li>
<li>Define a service that can store data in the bucket</li>
<li>Configure and start the Velero server</li>
</ul>
<h2 id="download-velero">Download Velero</h2>
<ol>
<li>
<p>Download the 

<a href="https://github.com/heptio/velero/releases">latest release&rsquo;s</a> tarball for your client platform.</p>
</li>
<li>
<p>Extract the tarball:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">tar -xvf &lt;RELEASE-TARBALL-NAME&gt;.tar.gz -C /dir/to/extract/to 
</code></pre></div><p>We&rsquo;ll refer to the directory you extracted to as the &ldquo;Velero directory&rdquo; in subsequent steps.</p>
</li>
<li>
<p>Move the <code>velero</code> binary from the Velero directory to somewhere in your PATH.</p>
</li>
</ol>
<p><em>We strongly recommend that you use an 

<a href="https://github.com/heptio/velero/releases">official release</a> of Velero. The tarballs for each release contain the
<code>velero</code> command-line client <strong>and</strong> version-specific sample YAML files for deploying Velero to your cluster. The code and sample YAML files in the master
branch of the Velero repository are under active development and are not guaranteed to be stable. Use them at your own risk!</em></p>
<h2 id="create-cos-instance">Create COS instance</h2>
<p>If you don’t have a COS instance, you can create a new one, according to the detailed instructions in 

<a href="https://console.bluemix.net/docs/services/cloud-object-storage/basics/order-storage.html#creating-a-new-resource-instance">Creating a new resource instance</a>.</p>
<h2 id="create-an-s3-bucket">Create an S3 bucket</h2>
<p>Velero requires an object storage bucket to store backups in. See instructions in 

<a href="https://console.bluemix.net/docs/services/cloud-object-storage/getting-started.html#create-buckets">Create some buckets to store your data</a>.</p>
<h2 id="define-a-service-that-can-store-data-in-the-bucket">Define a service that can store data in the bucket.</h2>
<p>The process of creating service credentials is described in 

<a href="https://console.bluemix.net/docs/services/cloud-object-storage/iam/service-credentials.html#service-credentials">Service credentials</a>.
Several comments:</p>
<ol>
<li>
<p>The Velero service will write its backup into the bucket, so it requires the “Writer” access role.</p>
</li>
<li>
<p>Velero uses an AWS S3 compatible API. Which means it authenticates using a signature created from a pair of access and secret keys — a set of HMAC credentials. You can create these HMAC credentials by specifying <code>{“HMAC”:true}</code> as an optional inline parameter. See step 3 in the 

<a href="https://console.bluemix.net/docs/services/cloud-object-storage/iam/service-credentials.html#service-credentials">Service credentials</a> guide.</p>
</li>
<li>
<p>After successfully creating a Service credential, you can view the JSON definition of the credential. Under the <code>cos_hmac_keys</code> entry there are <code>access_key_id</code> and <code>secret_access_key</code>. We will use them in the next step.</p>
</li>
<li>
<p>Create an Velero-specific credentials file (<code>credentials-velero</code>) in your local directory:</p>
<pre><code>[default]
aws_access_key_id=&lt;ACCESS_KEY_ID&gt;
aws_secret_access_key=&lt;SECRET_ACCESS_KEY&gt;
</code></pre><p>where the access key id and secret are the values that we got above.</p>
</li>
</ol>
<h2 id="credentials-and-configuration">Credentials and configuration</h2>
<p>In the Velero directory (i.e. where you extracted the release tarball), run the following to first set up namespaces, RBAC, and other scaffolding. To run in a custom namespace, make sure that you have edited the YAML files to specify the namespace. See 

    

<a href="/docs/v0.11.0/namespace/">Run in custom namespace</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f config/common/00-prereqs.yaml
</code></pre></div><p>Create a Secret. In the directory of the credentials file you just created, run:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl create secret generic cloud-credentials <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --namespace &lt;VELERO_NAMESPACE&gt; <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --from-file cloud<span style="color:#f92672">=</span>credentials-velero
</code></pre></div><p>Specify the following values in the example files:</p>
<ul>
<li>
<p>In <code>config/ibm/05-backupstoragelocation.yaml</code>:</p>
<ul>
<li>Replace <code>&lt;YOUR_BUCKET&gt;</code>, <code>&lt;YOUR_REGION&gt;</code> and <code>&lt;YOUR_URL_ACCESS_POINT&gt;</code>. See the 

    

<a href="/docs/v0.11.0/api-types/backupstoragelocation/">BackupStorageLocation definition</a> for details.</li>
</ul>
</li>
<li>
<p>(Optional) If you run the nginx example, in file <code>config/nginx-app/with-pv.yaml</code>:</p>
<ul>
<li>Replace <code>&lt;YOUR_STORAGE_CLASS_NAME&gt;</code> with your <code>StorageClass</code> name.</li>
</ul>
</li>
</ul>
<h2 id="start-the-velero-server">Start the Velero server</h2>
<p>In the root of your Velero directory, run:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f config/ibm/05-backupstoragelocation.yaml
kubectl apply -f config/ibm/10-deployment.yaml
</code></pre></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section section-background-darkest-blue">
    <div class="section-content">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-lg-8">
                <h5>Getting Started</h5>
                <p>To help you get started, see the documentation.</p>
            </div>
            <div class="col-xs-12 col-sm-6 col-lg-3 offset-lg-1">
                <p><strong></strong></p>
                <a href="/docs"
                   class="btn btn-sm btn-primary btn-no-border">Documentation</a>
            </div>
        </div>
    </div>
</div>

<footer class="section site-footer">
    <div class="section-content">
        <div class="row justify-content-between align-items-center">
            <div class="col-12 col-md-8 mb-3 mb-md-0">
                <ul class="social-links text-center text-md-left">
                    
                        <li>
                            
                                <i class="fab fa-twitter fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://twitter.com/projectvelero">Twitter</a>
                        </li>
                    
                        <li>
                            
                                <i class="fab fa-slack fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://kubernetes.slack.com/messages/velero">Slack</a>
                        </li>
                    
                        <li>
                            
                                <i class="fas fa-users fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://groups.google.com/forum/#!forum/projectvelero">Google Groups</a>
                        </li>
                    
                        <li>
                            
                                <i class="fa fa-rss fa-lg fa-fw mr-1"></i>
                            
                            <a href="feed.xml">RSS</a>
                        </li>
                    
                        <li>
                            
                                <i class="fab fa-github fa-lg fa-fw mr-1"></i>
                            
                            <a href="https://github.com/vmware-tanzu/velero">GitHub</a>
                        </li>
                    
                </ul>
            </div>
            <div class="col-12 col-md-4 text-center text-md-right">
                <a href="/" aria-label="Velero homepage"><img src="/img/Velero.svg" class="logo"
                                                              alt="Homepage"/></a>
            </div>
        </div>
        <div class="row align-items-center">
            <div class="col copyright text-center text-md-right mt-4">
                &copy; 2020 Velero Authors.
                <a href="http://vmware.github.io/" class="vm-logo">A VMware-backed project. <img
                            src="/img/vm-logo.png" alt="VMware logo"/></a>
            </div>
        </div>
    </div>
</footer>


<script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js"
        integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>

<script src="/js/jquery.matchHeight.js?1593121911"></script>
<script src="/js/scripts.js?1593121911"></script>

    </div>
</div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
        apiKey: '3d80f66bb5ecf85f8e2760caef383f24',
        indexName: 'velero',
        inputSelector: '.docsearch-input',
        algoliaOptions: {'facetFilters': ["version:v0.11.0"]},
        debug: false 
    });
</script>
</body>

</html>
